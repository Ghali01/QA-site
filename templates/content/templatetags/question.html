{% load contentUtilities %}
{% load humanize %}
<h1 class="que-title center-title">{{question.title}}

    {% if not question.post.isPublished %}
     (unPublished)
    {% endif %}
</h1>
<div class="que-data-div">
    <span class="que-data-title">Asked:</span>
    <span class="que-data">{{question.getDuration}}</span>
    <span class="que-data-title">Active: </span>
    <span class="que-data">{{question.getLastActDuration}}</span>
    <span class="que-data-title">Viwes: </span>
    <span class="que-data">{{question.views|intcomma}}</span>
</div>
<div class="question-div">
    <div class="row">

        {% if request.user.is_authenticated and not request.user.is_anonymous %}
        <div class="col-1 icons-col">

            {% with question.post|getVote:request.user as V %}

            <i class="fas fa-sort-up sort-icon sort-icon-up
            {% if V == 'up' %}
            sort-icon-act
            {% endif %}
            " data-post-id="{{question.post.id}}"></i>
            <span class="votes-number-span">{{question.post.getVotes}}</span>
            <i class="fas fa-sort-down sort-icon sort-icon-down
            {% if V == 'down' %}
            sort-icon-act
            {% endif %}
          
            " data-post-id="{{question.post.id}}"></i>
            <i class="far fa-bookmark bookmark-icon"></i>
            {% endwith %}
        </div>
        {% endif %}
        <div class="
        {% if request.user.is_authenticated and not request.user.is_anonymous  %}
        
        col-11
        {% else %}
        col-12
        {% endif %}
        
        ">
            <div class="post-content-container">
                <div class="post-content">
                    {{question.post.text|safe}}
                </div>
                {% if request.user.profile.isSuperAdmin %}
                <a target="_blank" href="{% url 'dashboard:edit-question-page' questionID=question.id %}" class="btn edit-post-btn"><i class="fas fa-pen"></i></a>
                {% endif %}
            </div>
        </div>
        <div class="row">
            <div class="col-8 post-l-col">
                <div class="que-left-col">
                    <div class="tags-div ">
                        {% for tag in question.tags.all %}
                        {% tagLink tag %}
                        {% endfor %}
                    </div>
                    <div class="que-opts-spans">
                        <a href="{% url 'content:suggest-post-edit' postID=question.post.id %}" class="custom-link custom-link-sm primary-link que-opt que-opt-sug">Suggest
                            Edit</a>
                        <div class="link-break">|</div>
                        <a href="#" class="custom-link custom-link-sm primary-link que-opt">Follow</a>
                        <div class="link-break">|</div>
                        <!-- Button trigger modal -->
                        <button type="button" class="link-button" data-bs-toggle="modal"
                            data-bs-target="#reportModal">
                            <a href="#" class="custom-link custom-link-sm primary-link que-opt">Report</a>
                        </button>



                    </div>
                    <div class="share-btns" id="share-btns">
                        <!-- Twitter -->
                        <a href="https://twitter.com/share?url={}" target="_blank" class="share-btn twitter">
                            <i class="fab fa-twitter"></i>
                        </a>

                        <!-- Facebook -->
                        <a href="https://www.facebook.com/sharer/sharer.php?u={}" target="_blank"
                            class="share-btn facebook">
                            <i class="fab fa-facebook-f"></i>
                        </a>

                        <!-- LinkedIn -->
                        <a href="https://www.linkedin.com/shareArticle?url={}" target="_blank"
                            class="share-btn linkedin">
                            <i class="fab fa-linkedin-in"></i>
                        </a>

                        <!-- Email -->
                        <a href="mailto:?subject=HMTL%20Share%20Buttons&body={}" target="_blank"
                            class="share-btn email">
                            <i class="fa fa-envelope"></i>
                        </a>
                    </div>
                </div>
            </div>
            <div class="col-4 post-r-col">
                <div class="authors-dvs">
                <div class="added-by-div-q que-added-by-div">
                    <div class="questtion-add-date">
                        Added in <time>{{question.formatedDate}}</time>
                    </div>
                    {% authodPostData question.post.author %}

                </div>
                {% if question.post.isEdited %}
                <div class="added-by-div-q que-added-by-div">
                    <div class="questtion-add-date">
                        Edited in <time>{{question.formatedDate}}</time>
                    </div>
                    {% authodPostData question.post.getLastEditAuthor %}

                </div>
                {% endif %}
            </div>
            </div>
        </div>
        <div class="comments-div">
            <ul class="comments-list">
                {% for comment in question.post.comments.all|slice:':3' %}
                {% commentItem comment request.user.profile.isSuperAdmin %}
                {% endfor %}
                {% if question.post.comments.all.count > 3 %}
                <li>
                    <p class="all-comment-span" data-post-id="{{question.post.id}}">All comment</p>
                </li>
                {% endif %}
            </ul>
            {#% if request.user.is_authenticated and not request.user.is_anonymous %#}

            <p class="add-comment-span">Add comment</p>
            <div class="add-comment-div">
                <input type="text" class="form-control que-input add-comm-inp" placeholder="Add Comment..." maxlength="300">
                <button class="btn btn-secondary btn-sm secondry-button add-comm-btn" data-post-id="{{question.post.id}}">Add
                    comment</button>
            </div>
            {#% endif %#}

        </div>
    </div>
</div>